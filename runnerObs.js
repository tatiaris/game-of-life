var fsButtonSize;var cols,rows;var scl=40;var grid=[];var gridCopy=grid;var start;function setup(){start=false;grid=[];createCanvas(innerWidth,innerHeight);fsButtonSize=30;cols=width/scl;rows=height/scl;createGrid();frameRate(5)}function draw(){createCanvas(innerWidth,innerHeight);background(0);drawGrid();if(start)update();drawLabel()}function update(){gridCopy=grid;for(var i=1;i<cols-1;i++){for(var j=1;j<rows-1;j++){grid[i][j].neighbours=0;for(var k=-1;k<2;k++){for(var l=-1;l<2;l++){if(!(k==0&&l==0)){if(gridCopy[i+k][j+l].alive){grid[i][j].neighbours++}}}}}}for(var i=1;i<cols-1;i++){for(var j=1;j<rows-1;j++){if(grid[i][j].neighbours<2||grid[i][j].neighbours>3)grid[i][j].alive=false;else if(grid[i][j].neighbours==3){grid[i][j].alive=true}}}}function keyPressed(){if(keyCode==32){start=!start}if(keyCode==82){setup()}}function createGrid(){for(var i=0;i<cols;i++){grid[i]=[];for(var j=0;j<rows;j++){grid[i][j]={col:i,row:j,neighbours:0,alive:false}}}}function drawGrid(){fill(0);stroke(255);for(var i=0;i<cols;i++){for(var j=0;j<rows;j++){if(grid[i][j].alive)fill(255);rect(i*scl,j*scl,scl,scl);fill(0)}}}function mousePressed(){if(mouseX<fsButtonSize&&mouseY<fsButtonSize&&!fullscreen()){var fs=fullscreen();fullscreen(!fs);setup()}for(var i=1;i<cols-1;i++){for(var j=1;j<rows-1;j++){if(collidePointRect(mouseX,mouseY,i*scl,j*scl,scl,scl)){grid[i][j].alive=!grid[i][j].alive}}}}function collidePointRect(pointX,pointY,x,y,xW,yW){if(pointX>=x&&pointX<=x+xW&&pointY>=y&&pointY<=y+yW){return true}return false}function drawLabel(){fill(255);rect(0,0,width,scl);rect(0,0,scl,height);rect(0,height-scl,width,scl);rect(width-scl,0,scl,height);textSize(20);stroke(0);fill(0);text("Hit 'space' to start/stop the Game of Life!",scl,scl-5);text("Press 'r' to eradicate all life",width*4/5,scl-5)}